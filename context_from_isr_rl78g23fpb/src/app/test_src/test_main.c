/*
 * test_main.c
 */

/**********************************************************************************************************************
 Includes   <System Includes> , "Project Includes"
 *********************************************************************************************************************/
#include "test_main.h"

/**********************************************************************************************************************
 Macro definitions
 *********************************************************************************************************************/

/**********************************************************************************************************************
 Local Typedef definitions
 *********************************************************************************************************************/

/**********************************************************************************************************************
 Exported global variables
 *********************************************************************************************************************/

/**********************************************************************************************************************
 Private (static) variables and functions
 *********************************************************************************************************************/
TaskHandle_t tskhdl_event_recv_task;

/**********************************************************************************************************************
 Functions
 *********************************************************************************************************************/
void test_start(void)
{
    BaseType_t err;

    configPRINT_STRING(("---------START test---------\r\n"));

    /* Create an event group handle. */
    vCreate_event_group ();

    /* Create a task to receive a event flag from the timer interrupt. */
    err = xTaskCreate (event_receive_task,
                       "EVENT_RECV_TASK",
                       CFG_STACK_DEPTH_EVENT_RECV_TASK,
                       NULL,
                       CFG_TSKPRI_EVENT_RECV_TASK,
                       &tskhdl_event_recv_task);
    if (pdPASS != err)
    {
        /* Failed! Task can not be created. */
        while (1)
        {
            __nop ();
        }
    }

    /* Start timer(TAU0_1) */
    R_Config_TAU0_1_Start ();

    vTaskSuspend (NULL);

    /* Loop forever. */
    while (1)
    {
        __nop ();
    }
}
/*-----------------------------------------------------------*/
